<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template App Didattica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .timer-display {
            text-align: center;
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .app-content {
            min-height: 300px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin: 10px auto;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .btn-certificate {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        /* Pannello Certificato */
        .certificate-panel {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .certificate-panel h3 {
            margin-bottom: 20px;
            text-align: center;
        }

        .cert-link {
            background: white;
            color: #667eea;
            padding: 15px;
            border-radius: 8px;
            word-break: break-all;
            font-family: monospace;
            font-size: 0.9em;
            margin: 15px 0;
        }

        .cert-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .cert-stat {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .cert-stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .cert-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéì Template App Didattica</h1>
        <p class="subtitle">Modifica questo template per creare la tua app!</p>

        <div class="timer-display" id="timerDisplay">‚è±Ô∏è Tempo: 00:00</div>

        <!-- Contenuto della tua app -->
        <div class="app-content">
            <h2 style="text-align: center; color: #667eea; margin-bottom: 20px;">
                Inserisci qui il contenuto della tua app
            </h2>
            
            <p style="text-align: center; color: #666; line-height: 1.8;">
                Questo √® un template base che include gi√† il sistema di certificazione.<br>
                Sostituisci questo contenuto con i tuoi esercizi!
            </p>

            <button class="btn btn-primary" onclick="simulateActivity()">
                üéØ Simula Attivit√† (incrementa contatore)
            </button>
        </div>

        <!-- Pannello Certificato (gi√† configurato) -->
        <div class="certificate-panel">
            <h3>üìú Certificato di Studio</h3>
            
            <!-- Le statistiche vengono popolate automaticamente qui -->
            <div class="cert-stats" id="certStatsContainer"></div>
            
            <button class="btn btn-certificate" id="generateCertBtn">üìã Genera Link Certificato</button>
            <button class="btn btn-danger" id="resetBtn" style="margin-top: 10px;">üîÑ Azzera Statistiche</button>
            
            <!-- Container link (nascosto inizialmente) -->
            <div id="certLinkContainer" style="display: none;">
                <p style="margin-top: 15px;">Copia questo link e invialo al docente:</p>
                <div class="cert-link" id="certLink"></div>
                <button class="btn btn-success" id="copyCertBtn">üìã Copia Link</button>
            </div>
        </div>
    </div>

    <!-- Importa il sistema di certificazione da CDN -->
    <script src="https://certificationsystem.netlify.app/certification-system.js"></script>

    <script>
        //#region ‚öôÔ∏è CONFIGURAZIONE SISTEMA CERTIFICAZIONE
        
        const certSystem = new CertificationSystem({
            // Nome della tua app
            appName: 'Template App',
            
            // Chiave unica per localStorage (CAMBIALA per ogni app!)
            storageKey: 'template_cert_data',
            
            // URL del lettore certificato (NON modificare)
            certUrl: 'https://certificationsystem.netlify.app/',
            
            // Traccia perdita focus? (true per esami, false per esercizi)
            trackFocus: false,
            
            // Definisci i campi da tracciare
            // showZero: false ‚Üí mostra "-" invece di 0 quando non applicabile
            fields: [
                { key: 'activities', label: 'Attivit√† Completate', showZero: false },
                { key: 'errors', label: 'Errori', showZero: true },
                { key: 'score', label: 'Punteggio', showZero: true }
            ],
            
            // Callback quando il timer si aggiorna (ogni secondo)
            onTimerUpdate: (time) => {
                const minutes = Math.floor(time / 60);
                const seconds = time % 60;
                const timeStr = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                document.getElementById('timerDisplay').textContent = `‚è±Ô∏è Tempo: ${timeStr}`;
            },
            
            // Callback quando un campo viene aggiornato
            onFieldUpdate: () => {
                // Aggiorna il pannello statistiche
                certSystem.renderStatsPanel('certStatsContainer');
            },
            
            // Callback quando viene fatto il reset
            onReset: () => {
                // Ricarica la pagina per resettare tutto
                location.reload();
            }
        });

        // Setup automatico dei bottoni
        certSystem.setupButtons('generateCertBtn', 'copyCertBtn', 'resetBtn', 'certLinkContainer');
        
        // Renderizza il pannello statistiche iniziale
        certSystem.renderStatsPanel('certStatsContainer');
        
        //#endregion

        //#region üéØ LOGICA DELLA TUA APP
        
        // Esempio: funzione che simula un'attivit√† completata
        function simulateActivity() {
            // Incrementa il contatore attivit√†
            certSystem.incrementField('activities');
            
            // Simula errori casuali
            if (Math.random() > 0.7) {
                certSystem.incrementField('errors');
            }
            
            // Incrementa punteggio
            certSystem.incrementField('score', 10);
            
            alert('Attivit√† simulata! Guarda le statistiche aggiornate nel certificato.');
        }

        // AGGIUNGI QUI LA TUA LOGICA:
        // - Gestione esercizi
        // - Verifica risposte
        // - Calcolo punteggi
        // - etc.
        
        // Quando uno studente completa un'attivit√†, usa:
        // certSystem.incrementField('nome_campo', quantit√†);
        
        // Esempio:
        // function onQuizCompleted(correct, wrong) {
        //     certSystem.incrementField('activities');
        //     certSystem.incrementField('score', correct * 10);
        //     certSystem.incrementField('errors', wrong);
        // }
        
        //#endregion
    </script>
</body>
</html>
